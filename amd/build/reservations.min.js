define([],function(){return{init:(e,t,n,o={})=>{const c=document.querySelector('select[name="siteid"]');if(!c)return;const i=document.querySelector('select[name="objectid"]'),r=document.querySelector(".local-inventario-unreturned-warning"),a=document.querySelector('input[name="location"]'),l=a?a.closest(".fitem"):null;c.addEventListener("change",(function(n){n.preventDefault();const o=new URLSearchParams;t&&o.set("id",t),o.set("siteid",c.value),window.location=e.split("?")[0]+"?"+o.toString()}));const s=function(){if(!i||!r)return;const e=parseInt(i.value,10);n&&n.includes(e)?r.classList.remove("hidden"):r.classList.add("hidden")},u=function(){if(!i||!a||!l)return;const e=parseInt(i.value,10),t=o?o[e]:null,n=t&&Object.prototype.hasOwnProperty.call(t,"requireslocation")?!!t.requireslocation:!0;n?(l.classList.remove("d-none"),l.classList.remove("hidden"),a.required=!0,a.setAttribute("aria-required","true")):(l.classList.add("d-none"),a.required=!1,a.removeAttribute("aria-required"),a.value="")};i&&(i.addEventListener("change",(()=>{s(),u()})),s(),u())}}});
