/**
 * Dashboard interactions for local_inventario.
 *
 * @module     local_inventario/dashboard
 * @copyright 2025 mdlbox - https://app.mdlbox.com
 * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define(["core/notification","core/toast","core/str"],function(e,t,r){let n="";const o=(o,c)=>{const s=o.dataset.id,d="1"===o.dataset.visible?0:1,l=new URLSearchParams;l.append("action","togglevisibility"),l.append("id",s),l.append("visible",d),l.append("sesskey",c.sesskey),fetch(c.toggleurl,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:l}).then(e=>e.json()).then(e=>{if(!e.success)throw new Error(e.error||n);o.dataset.visible=d.toString(),o.innerText=d?o.dataset.hideLabel:o.dataset.showLabel,t.add({message:o.dataset.notice})}).catch(e.exception)},c=(t,r)=>{e.confirm(t.dataset.confirmTitle,t.dataset.confirmMessage,t.dataset.confirmYes,t.dataset.confirmNo,()=>o(t,r))};return{init:e=>{r.get_string("unknownerror","local_inventario").then(r=>{n=r,document.querySelectorAll("[data-inventario-toggle]").forEach(t=>{t.addEventListener("click",r=>{r.preventDefault(),c(t,e)})})}).catch(e.exception)}}});
